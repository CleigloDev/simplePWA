<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="manifest" href="manifest.json"/>
</head>
<body>
    
    <h1>
        Hello World
    </h1>
    <div></div>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-messaging-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC3HOmbMqx6nUu1dFnL1seGnulvHko3kQE",
            authDomain: "simplepwa-a5a3e.firebaseapp.com",
            projectId: "simplepwa-a5a3e",
            storageBucket: "simplepwa-a5a3e.appspot.com",
            messagingSenderId: "1062341546220",
            appId: "1:1062341546220:web:08c517b742d8e6ad3b95c9",
            measurementId: "G-JR8PLMCFQ9"
        };
        const firebaseApp = firebase.initializeApp(firebaseConfig);
    </script>

    <script>
        if('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
        }
    </script>

    <script>
        const messaging = firebase.messaging();
        // Get registration token. Initially this makes a network call, once retrieved
        // subsequent calls to getToken will return from cache.
        Notification.requestPermission()
        .then(() => {
            // navigator.serviceWorker
            // .register("./firebase-messaging-sw.js")
            // .then(registration => {})
            return messaging.getToken({
                vapidKey: "BDSooVcmyeyVuilKCUZNp_uw4vI7n82bodiNWL6X8i5JjIrL8vHf9yEfzqPXijRihb325w8mil9womwxvcEVSUA",
                // serviceWorkerRegistration : registration 
            })
        }).then((currentToken) => {
            console.log(currentToken);
            var div = document.getElementsByTagName('div'),
            p = document.createElement("p");
            p.innerHTML = currentToken;
            div[0].append(p);
        }).catch((err) => {
            console.log('An error occurred while retrieving token. ', err);
        });
    </script>

</body>
</html>